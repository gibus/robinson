/** 
 * Primary Drupal Styles
 * Author: g-u-i.net
 */

@import "gui.less";
@import "font";
@import "misc";

/* sidebars */
body:not(.no-sidebars) #center, #sidebar-first, #sidebar-second, .footer-block .region, .header-block{ display:inline-block; vertical-align: top;}

body.two-sidebars #center { width: 54%; }
body.sidebar-first #center { width: 73%; }
body.sidebar-second #center { width: 80%; }
body.no-sidebars #center { width: 100%; }

#sidebar-first { width: 24%; }
#sidebar-second { width: 18%; }

@cell_w : 340px;
@cell_h : 249px;
@line_h : @cell_h/4; 

@rouge:#A31705;
@bleu:#1922FB;
@vert:#00C624;
@postanime-grey:#D8D8D8;
@postanime-opacity:0.9;

.colored(){
  color:@vert;
  .random-mode &{ color:@vert; }
  .program-mode &{ color:@rouge; }
}
.bgcolored(){
  background-color:@vert;
  .random-mode &{ background-color:@vert; }
  .program-mode &{ background-color:@rouge; }
}

/* general */
html{
  position:relative; .m(0); .p(0);
  width:100%; height:100%;
}

body{
  position:relative; .m(0); .p(0);
  width:100%; height:100%;
}

#container{
  width:100%; height:100%;
  overflow: hidden;
}

#header{
  position:fixed: top:0; left:0;
  text-align: center;
  .js .front &{display:none;}
}

#main{
  &, &>#center{
    position:absolute; top:0; left:0; 
    width:100%; height:100%;
  }

  #content{
    .js .front &{display:none;}
  }

  #no-interaction{
    position:absolute;
    z-index:999;
    width:100%; height:100%;
  }
} 

#stream-wrapper{
  cursor: none;
  &>*{.m(0); .p(0); .colored; }

  .placed{position:absolute;}

  #site-name{
    // z-index:100;
    width:@cell_w; height:@line_h;
    .bgcolored; color:#fff;
    text-align: center; vertical-align: middle; 
    .500; text-transform: uppercase;
    .24; line-height:2.4; 

    &.not-anime{
      visibility:visible;
      .transition-simply-prefix(~"all 0s linear");
    }
    &.pre-anime{
      // .transition-simply-prefix(~"all 0s linear");
      .colored;
    }
    &.anime{
      .transition-simply-prefix(~"all 1s linear");
      color:#FFF;
    }
    &.post-anime{
      .transition-simply-prefix(~"all 10s linear");
      background-color: @postanime-grey;
      opacity:@postanime-opacity;
    }
  }

  
  .thema{
    // position:absolute; width:100%; height:100%; top:0; left:0;

    &>*{.m(0); .p(0); color:#fff; overflow:hidden;}
    
    h2.thema-title{
      width:@cell_w*2; height:@cell_h*2;
      .bgcolored; color:#fff;
      // display:table;
      span.txt{
        // .inlineblock(); 
        // display:table-cell;
        // vertical-align: middle;
        // .p(1em);
        display:none;
      }

      .field-name-field-titre-lettrage{
        &, *{
          width:100%; height:auto;
        }
      }

      &.pre-anime{
        span.txt, .field-name-field-titre-lettrage{
          .transition-simply-prefix(~"opacity 0 linear");
          visibility:hidden;
          opacity:0;
        }
      }

      &.anime{
        span.txt .field-name-field-titre-lettrage{
          .transition-simply-prefix(~"opacity 1s linear");
          visibility:visible;
          opacity:1;
        }
      }

      &.post-anime{
        .transition-simply-prefix(~"all 10s linear");
        background-color: @postanime-grey;
        opacity:@postanime-opacity;
        // span.txt{
        //   .transition-simply-prefix(~"opacity 5s linear");
        //   opacity:0;
        // }
      }
    }

    .content{
      width:cell_w; .inlineblock(); height:auto;
      background-color: #fff; .colored;

      .field-name-field-video{
        height:@line_h*4;
      }

      .field-name-field-thema-date{
        width:@cell_w; height:@line_h;
      }

      .site-name{
        // z-index:100;
        width:@cell_w; height:@line_h;
        .bgcolored; color:#fff;
        text-align: center; vertical-align: middle; 
        .500; text-transform: uppercase;
        .24; line-height:2.4; 
        .m(0);
      }


      &.pre-anime{
        .bgcolored;
        &>*{
          .transition-simply-prefix(~"all 0 linear");
          visibility:hidden;
          opacity:0;
        }
      }

      &.anime{
        .transition-simply-prefix(~"all 2s linear");
        background-color: #fff;
        &>*{
          .transition-simply-prefix(~"all 2s linear");
          visibility:visible;
          opacity:1;
        }
      }

      &.post-anime{
        .transition-simply-prefix(~"all 5s linear");
        background-color: @postanime-grey;
        opacity:@postanime-opacity;
        
        &>*{
          .transition-simply-prefix(~"all 5s linear");
          // visibility:visible;
          opacity:0;
        }
      }
    }

    .voisin{
      &.audio{
        height:0; overflow:hidden;
      }
      &.video{
        width:@cell_w*2; height:@cell_h*2;
        .bgcolored;
        &.pre-anime{
          .field-name-field-video{
            opacity:0;
          }
        }
        &.anime{
          .field-name-field-video{
            .transition-simply-prefix(~"all 3s ease-out");
            opacity:1;
          }
        }
        &.post-anime{
          background-color:@postanime-grey;
          opacity:@postanime-opacity;
          .field-name-field-video{
            .transition-simply-prefix(~"all 1s ease-out");
            opacity:0;
          }
        }
      }
      &.image{
        width:@cell_w*2; height:@cell_h*2;
      }
      &.text{
        width:@cell_w;// height:@cell_h*2;
        .bgcolored;
        &.post-anime{
          background-color:@postanime-grey;
          opacity:@postanime-opacity;
        }
        .field-name-field-texte{
          .p(1em); .24;
        }
      }
      
    }
  }
}

/** Anime */

.not-anime{
  .transition-simply-prefix(~"all 0s ease-out");
  visibility:hidden;
  opacity:0;
}

.pre-anime{
  .transition-simply-prefix(~"all 2s ease-out");
  visibility:visible;
  opacity:1;
}

.anime{
  .transition-simply-prefix(~"all 5s ease-out");
}

.post-anime{
  .transition-simply-prefix(~"all 12s linear");
  visibility:visible;
  opacity:0.2;
}

#footer{
  z-index:20;
  position:fixed; bottom:0; left:0;
  width:100%;
  text-align: center;
  .10; color:#1A1A1A;
  p{.m(0.2em);}
  a{color:inherit;}
}

#footer-bottom{ text-align: center;}

#header ul.menu li, 
#content-top ul.menu li, 
#content-bottom ul.menu li, 
#footer ul.menu li{display:inline-block; vertical-align:top; }

#bord-time{
  position:absolute;
  width:100%;
  height:@line_h*4;
  top:0; left:0;
  .bord-time{
    height: 100%;
    width:50px;
    position:absolute;
    .bgcolored;
    .opacity(0.3);

    &.bord-time-left{
      left:0;
    }
    &.bord-time-right{
      right:0;
    }
  }
}



